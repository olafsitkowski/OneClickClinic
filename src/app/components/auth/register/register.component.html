<app-nav-bar [disableNavigation]="true" position="absolute"></app-nav-bar>
<div class="register-page">
  <div class="container">
    <div class="row justify-content-center">
      <div class="col-md-6">
        <div class="box">
          <h2 class="text-center">{{ 'REGISTER_THE_ADMIN' | translate }}</h2>
          <form [formGroup]="registerForm" (ngSubmit)="onSubmit()">
            <div>
              <div *ngFor="let field of registerFormFields">
                <div class="form-group">
                  <label [for]="field.controlName">{{ field.label | translate}}</label>
                  <input
                    [type]="field.type"
                    class="form-control"
                    [id]="field.controlName"
                    [formControlName]="field.controlName"
                    [autocomplete]="field.autocomplete"
                    (input)="onFormInput(field.controlName)"
                    [ngClass]="{
                      error:
                        registerForm.controls[field.controlName].invalid &&
                        registerForm.controls[field.controlName].touched
                    }"
                    [tooltip]="
                      field.controlName === 'password'
                        ? ('PASSWORD.REQUIREMENTS' | translate)
                        : ''
                    "
                    [delay]="500"
                  />
                  <div
                    *ngIf="
                      registerForm.controls[field.controlName]?.invalid &&
                      registerForm.controls[field.controlName]?.touched
                    "
                    class="invalid-field"
                  >
                    <span
                      *ngIf="
                        registerForm.controls[field.controlName]?.hasError(
                          'required'
                        )
                      "
                      >This field is required.</span
                    >
                    <span
                      *ngIf="
                        registerForm.controls[field.controlName]?.hasError(
                          'email'
                        )
                      "
                      >Invalid email format.</span
                    >
                    <span
                      *ngIf="
                        registerForm.controls[field.controlName]?.hasError(
                          'passwordsDoNotMatch'
                        ) && registerForm.controls['password'].value.length >= 8
                      "
                      >Password do not match.</span
                    >
                    <span
                      *ngIf="
                        registerForm.controls[field.controlName]?.hasError(
                          'pattern'
                        )
                      "
                      >Password is too weak.</span
                    >
                  </div>
                </div>
              </div>
            </div>

            <div class="text-center mt-3">
              <button
                class="btn btn-primary"
                type="submit"
                [disabled]="registerForm.invalid"
              >
                Confirm
              </button>
            </div>
          </form>
        </div>
      </div>
    </div>
  </div>
</div>
